<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<title>网易云音乐列表选中</title>
		<link rel="stylesheet" href="css/index.css" />
	</head>
	<body>
		<div class="box">
			<div id="wrap">
				<ul id="list">
					<li>
						<label>
							<input type="checkbox" />
							<span>第一条信息</span>
						</label>
					</li>
					<li>
						<label>
							<input type="checkbox" />
							<span>第二条信息</span>
						</label>
					</li>
					<li>
						<label>
							<input type="checkbox" />
							<span>第三条信息</span>
						</label>
					</li>
					<li>
						<label>
							<input type="checkbox" />
							<span>第四条信息</span>
						</label>
					</li>
					<li>
						<label>
							<input type="checkbox" />
							<span>第五条信息</span>
						</label>
					</li>
					<li>
						<label>
							<input type="checkbox" />
							<span>第六条信息</span>
						</label>
					</li>
					<li>
						<label>
							<input type="checkbox" />
							<span>第七条信息</span>
						</label>
					</li>
				</ul>
				<footer class="footer">
					<label class="checkAll"><input type="checkbox" id="checkAll" />全选</label>
					<a href="javascript:;" id="remove">删除</label>
				</footer>
			</div>
		</div>
		<script type="text/javascript">
			let list = document.getElementById("list");
            let lis = document.querySelectorAll("li")
			let checkAll = document.getElementById("checkAll");
            let remove = document.getElementById("remove");
            lis = Array.from(lis);
            lis.forEach(item=>{
                let checkbox = item.querySelector("input");
                checkbox.onchange = ()=>{
                    item.className = checkbox.checked?"active":"";
                    checkAll.checked = lis.every(item =>item.querySelector("input").checked);
                }
            })
            checkAll.onchange = function(){
                lis.forEach(item=>{
                    let checkbox = item.querySelectorAll("input");
                    checkbox.checked = this.checked;//this指的是item的定义的位置的this,也就是checkAll
                    item.className = checkbox.checked?"active":"";
                });
            }
            remove.onclick = ()=>{
                lis.filter(item=>{
                    let checkbox = item.querySelector("input");//这里的item是遍历lis数组的单一节点
                    if(checkbox.checked){
                        item.parentNode.removeChild(item);
                        return false;
                    }else {
                        return true;
                    }
                })
                checkAll.checked = lis.every(item=>item.querySelector("input").checked)&&lis.length>0
            }
			/* list.onclick = function() {
				console.log([...arrLi].every(item => item.checked));
				if ([...arrLi].every(item => item.checked)) {
					checkAll.checked = true;
				} else {
					checkAll.checked = false;
				}
			} 
			checkAll.onchange = function() {
				if (checkAll.checked==false) {
					console.log("选中");
					[...arrLi].every(item => item.checked = false);
				} else {
					console.log("未选中");
					[...arrLi].every(item => item.checked = true);
				}
			}*/
		</script>
	</body>
</html>
